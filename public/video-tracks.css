/* =========================================================
   D3 - Inline Video Tiles in Players List
   - Uses existing theme CSS variables:
     --speaker-border, --speaker-glow, --speaker-bg
========================================================= */

:root {
  --vtile-w: 72px;
  --vtile-h: 52px;
  --vtile-radius: 10px;
  --vtile-border: rgba(255, 255, 255, 0.14);
  --vtile-bg: rgba(0, 0, 0, 0.35);
  --vtile-shadow: 0 10px 30px rgba(0,0,0,0.28);
}

.player-item .player-video-slot {
  width: var(--vtile-w);
  height: var(--vtile-h);
  min-width: var(--vtile-w);
  min-height: var(--vtile-h);
  border-radius: var(--vtile-radius);
  border: 2px solid var(--vtile-border);
  background: var(--vtile-bg);
  overflow: hidden;
  box-shadow: var(--vtile-shadow);
  flex: 0 0 auto;
  position: relative;
  /* D4: Forcer la visibilit√© */
  display: block !important;
}

.player-item .player-video-slot:empty::after {
  content: "üé•";
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: 16px;
  opacity: 0.45;
}

.player-item .player-video-slot video.player-video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.player-item.is-speaking .player-video-slot {
  border-color: var(--speaker-border);
  box-shadow:
    0 0 0 2px color-mix(in srgb, var(--speaker-border) 45%, transparent),
    0 0 22px var(--speaker-glow),
    var(--vtile-shadow);
}

.player-item.is-speaking .player-video-slot::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--speaker-bg);
  opacity: 0.18;
  pointer-events: none;
}

/* Small layout helpers: if your player row is flex, keep space sane */
.player-item .player-left {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1 1 auto; /* D6: Prendre l'espace disponible */
  min-width: 0; /* D6: Permettre le shrink */
}

.player-item .player-right {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}

/* D6: Garantir l'affichage du nom √† c√¥t√© de la vignette vid√©o */
.player-item .player-info {
  display: flex !important;
  flex-direction: column !important;
  gap: 4px;
  flex: 1 1 auto;
  min-width: 0; /* Permettre le shrink du texte */
}

.player-item .player-info .player-name {
  font-weight: 700;
  font-size: 1rem;
  color: white;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* D6: S'assurer que les pills s'affichent en ligne */
.player-item .player-info .pill {
  display: inline-block;
  margin-right: 4px;
}

/* Mobile */
@media (max-width: 520px) {
  :root {
    --vtile-w: 84px;
    --vtile-h: 62px;
  }
}
